# BulletMovement 组件使用手册

## 版本：1.0

### 1. 组件概述

`BulletMovement` 是一个纯C++，无物理，高性能，完全参数驱动的轻量级子弹移动组件，提供一站式的射击游戏-弹幕游戏的子弹移动解决方案，集成了众多游戏化的、直接上手可用的功能，只需要通过简单的参数配置即可使用。

#### 功能支持：
1. **基础弹道控制**：
   - 支持加速/减速，包括固定值和动态曲线方式。
   - 支持阶段式命中速度变化（基于命中次数和阶段控制）。
   - 支持子弹的最大射程控制。
   - 支持阶段化时间控制，每个阶段可以触发特定效果。

2. **特殊轨迹效果**：
   - 支持持续或单次偏转子弹轨迹的效果。
   - 提供高性能数值化反弹效果，支持标准反弹和定向反弹。
   - 支持手动或自动反射的方向性反弹效果。

3. **追踪与导弹尾迹**：
   - 支持基于百分比的诱导追踪效果。
   - 通过曲线动态控制追踪性能的变化。
   - 集成导弹尾迹特效，不会随着子弹消失而立刻消失。
   - 支持回归效果，子弹可以指定回归对象并返回。

### 使用方式：

1. **在 Actor 内添加 BulletMovement 组件**
   将 `BulletMovement` 组件添加到角色或物体的 Actor 中。

2. **调整组件参数**：
   - **初始速度**：设置子弹启动时的原始速度。
   - **最大速度**：设置子弹能够达到的最大速度。如果为 0 则不限制子弹的最大速度。
   - **停止速度**：当子弹的速度减至此值以下时，触发停止事件，原因是速度过低。
   - **最大移动距离**：设置子弹的最大移动距离，超过此距离触发停止事件。
   - **最大存在时间/阶段**：设置子弹的生存时间，每个阶段的时间限制，超过时间触发停止事件。
   - **初始速度指向瞄准位置**：启用后，子弹将在激活时指向目标位置。
   - **瞄准方向**：设置子弹的目标方向（世界位置）。

3. **物理与加速度设置**：
   - **加速度信息**：设置子弹的加速度，以常量加速度或者动态曲线调整速度变化。
   - **命中后减速/阶段**：设置子弹命中后的减速效果，可以分阶段设置减速的强度。
   - **重力尺度**：设置子弹受重力影响的程度，与场景的默认重力相乘来影响子弹轨迹。
   
4. **特效设置**：
   - **拖尾特效**：为子弹设置拖尾特效，并控制特效的大小和消失时机。
   - **反射类型**：设置子弹命中后的反射类型，支持标准反弹和定向反射。 
   - **追踪效率**：控制子弹的追踪效率，支持通过曲线调整动态追踪表现。
   - **回归效果**：设置子弹在命中目标后是否回归，并指定回归目标和插槽。

---

### 组件详细功能介绍：
- **反弹效果**：
  - 标准反弹：沿命中法线进行镜像反弹。
  - 定向反弹：根据指定的反射目标进行反弹，支持自动检测反射目标。
  - 自动反射：检测指定距离内的目标并进行反射。

- **追踪与回归**：
  - 追踪效果：控制子弹自动追踪目标，可以手动启用追踪并通过曲线动态调整追踪强度。
  - 回归效果：当子弹停止时，可以根据回归目标进行回归，适用于回旋镖、火箭等类型。
